From 93fbd310d78b67a4252f739ccfac4e2438eb1b86 Mon Sep 17 00:00:00 2001
From: Ubuntu <ubuntu@ip-172-31-13-182.us-east-2.compute.internal>
Date: Sun, 5 Feb 2023 21:36:18 +0000
Subject: [PATCH] deploying wordpress app on AWS ec2 instance

---
 .hosts.swp                         | Bin 0 -> 12288 bytes
 README.md                          |  25 ++++++++++++++
 hosts                              |   2 ++
 roles/ec2/README.md                |  38 +++++++++++++++++++++
 roles/ec2/defaults/main.yml        |   2 ++
 roles/ec2/handlers/main.yml        |   2 ++
 roles/ec2/meta/main.yml            |  52 +++++++++++++++++++++++++++++
 roles/ec2/tasks/main.yml           |  27 +++++++++++++++
 roles/ec2/tests/inventory          |   2 ++
 roles/ec2/tests/test.yml           |   5 +++
 roles/ec2/vars/main.yml            |   2 ++
 roles/mysql/README.md              |  38 +++++++++++++++++++++
 roles/mysql/defaults/main.yml      |   5 +++
 roles/mysql/handlers/main.yml      |   2 ++
 roles/mysql/meta/main.yml          |  52 +++++++++++++++++++++++++++++
 roles/mysql/tasks/main.yml         |  12 +++++++
 roles/mysql/templates/wp-config.j2 |   7 ++++
 roles/mysql/tests/inventory        |   2 ++
 roles/mysql/tests/test.yml         |   5 +++
 roles/mysql/vars/main.yml          |   2 ++
 roles/php/README.md                |  38 +++++++++++++++++++++
 roles/php/defaults/main.yml        |   2 ++
 roles/php/handlers/main.yml        |   2 ++
 roles/php/meta/main.yml            |  52 +++++++++++++++++++++++++++++
 roles/php/tasks/main.yml           |   8 +++++
 roles/php/tests/inventory          |   2 ++
 roles/php/tests/test.yml           |   5 +++
 roles/php/vars/main.yml            |   2 ++
 roles/server/README.md             |  38 +++++++++++++++++++++
 roles/server/defaults/main.yml     |   2 ++
 roles/server/handlers/main.yml     |   2 ++
 roles/server/meta/main.yml         |  52 +++++++++++++++++++++++++++++
 roles/server/tasks/main.yml        |  26 +++++++++++++++
 roles/server/tests/inventory       |   2 ++
 roles/server/tests/test.yml        |   5 +++
 roles/server/vars/main.yml         |   2 ++
 roles/wordpress/README.md          |  38 +++++++++++++++++++++
 roles/wordpress/defaults/main.yml  |   2 ++
 roles/wordpress/handlers/main.yml  |   5 +++
 roles/wordpress/meta/main.yml      |  52 +++++++++++++++++++++++++++++
 roles/wordpress/tasks/main.yml     |  32 ++++++++++++++++++
 roles/wordpress/tests/inventory    |   2 ++
 roles/wordpress/tests/test.yml     |   5 +++
 roles/wordpress/vars/main.yml      |   2 ++
 wordpress.yaml                     |  19 ++++++++++-
 45 files changed, 678 insertions(+), 1 deletion(-)
 create mode 100644 .hosts.swp
 create mode 100644 hosts
 create mode 100644 roles/ec2/README.md
 create mode 100644 roles/ec2/defaults/main.yml
 create mode 100644 roles/ec2/handlers/main.yml
 create mode 100644 roles/ec2/meta/main.yml
 create mode 100644 roles/ec2/tasks/main.yml
 create mode 100644 roles/ec2/tests/inventory
 create mode 100644 roles/ec2/tests/test.yml
 create mode 100644 roles/ec2/vars/main.yml
 create mode 100644 roles/mysql/README.md
 create mode 100644 roles/mysql/defaults/main.yml
 create mode 100644 roles/mysql/handlers/main.yml
 create mode 100644 roles/mysql/meta/main.yml
 create mode 100644 roles/mysql/tasks/main.yml
 create mode 100644 roles/mysql/templates/wp-config.j2
 create mode 100644 roles/mysql/tests/inventory
 create mode 100644 roles/mysql/tests/test.yml
 create mode 100644 roles/mysql/vars/main.yml
 create mode 100644 roles/php/README.md
 create mode 100644 roles/php/defaults/main.yml
 create mode 100644 roles/php/handlers/main.yml
 create mode 100644 roles/php/meta/main.yml
 create mode 100644 roles/php/tasks/main.yml
 create mode 100644 roles/php/tests/inventory
 create mode 100644 roles/php/tests/test.yml
 create mode 100644 roles/php/vars/main.yml
 create mode 100644 roles/server/README.md
 create mode 100644 roles/server/defaults/main.yml
 create mode 100644 roles/server/handlers/main.yml
 create mode 100644 roles/server/meta/main.yml
 create mode 100644 roles/server/tasks/main.yml
 create mode 100644 roles/server/tests/inventory
 create mode 100644 roles/server/tests/test.yml
 create mode 100644 roles/server/vars/main.yml
 create mode 100644 roles/wordpress/README.md
 create mode 100644 roles/wordpress/defaults/main.yml
 create mode 100644 roles/wordpress/handlers/main.yml
 create mode 100644 roles/wordpress/meta/main.yml
 create mode 100644 roles/wordpress/tasks/main.yml
 create mode 100644 roles/wordpress/tests/inventory
 create mode 100644 roles/wordpress/tests/test.yml
 create mode 100644 roles/wordpress/vars/main.yml

diff --git a/.hosts.swp b/.hosts.swp
new file mode 100644
index 0000000000000000000000000000000000000000..f2c331d7656e382534db16a5f87067b4486f861e
GIT binary patch
literal 12288
zcmeI%y-ve05WsPlg$aRRWGOI**2zFuBo+q7!cd{eRxDAeBv$PRvA`4YSil4DF>`6t
z1(m5&#NX28WXnFCf14FMyuQ5Zk4{r1W3TxvM}DYOZR;}DtChd=)F=8ZO){P6EYYJy
zsdc-bmIVhl)x7X?7eanshN+#o{KENJ^?2{fIJm1q4C_v_h5!Pa3G9rsR1cdPC&x$q
zgZ=Sl<v5K10tg_000IagfB*uW5{SO1o~7fhw(IRS_kQJeN<shu1Q0*~0R#|0009IL
zKmdUb3YbEvmtCb^C7S>LtM~u6%)cZ)B|aqHCEg?!`#N|}T1Ef?1Q0*~0R#|0009IL
ZK;Rz;ObQc?HNl13=C+duXN~tV`2pr{FCG8@

literal 0
HcmV?d00001

diff --git a/README.md b/README.md
index 1872661..2f63ac7 100644
--- a/README.md
+++ b/README.md
@@ -19,3 +19,28 @@ Includes following tasks:
 
 â€¢ Finally Making the docker container add one post to the WordPress site every hour, as long as it runs.
  
+What is WordPress?
+WordPress (WP, WordPress.org) is a free and open-source content management system (CMS) written in PHP and paired with a MySQL or MariaDB database. Features include a plugin architecture and a template system, referred to within WordPress as Themes.
+
+
+What is AWS?
+Amazon Web Services (AWS) is a subsidiary of Amazon providing on-demand cloud computing platforms and APIs to individuals, companies, and governments, on a metered pay-as-you-go basis. These cloud computing web services provide a variety of basic abstract technical infrastructure and distributed computing building blocks and tools.
+
+
+What is Ansible?
+Ansible is an open-source software provisioning, configuration management, and application-deployment tool enabling infrastructure as code.It runs on many Unix-like systems, and can configure both Unix-like systems as well as Microsoft Windows. 
+
+What is Docker?
+Docker is an open platform for developing, shipping, and running applications. Docker enables you to separate your applications from your infrastructure so you can deliver software quickly.Docker provides the ability to package and run an application in a loosely isolated environment called a container. The isolation and security allows you to run many containers simultaneously on a given host. Containers are lightweight and contain everything needed to run the application, so you do not need to rely on what is currently installed on the host. You can easily share containers while you work, and be sure that everyone you share with gets the same container that works in the same way.
+
+Steps To Install WordPress Using Ansible:
+1. Prepare Workstation (where Ansible playbook will be created and run) by installing Ansible
+2. Transfer workstation SSH public key to EC2 server so that workstation can do SSH to server.
+   Test :
+     ssh into the server from workstation 
+     ansible -i hosts -m ping -u ubuntu - try pinging server from workstation
+
+3. Create Ansible Playbook "playbook.yaml"
+4. Create Ansible roles using Ansible galaxy for php, mysql, wordpress, server etc.
+5. Run Ansible playbook - playbook.yaml
+6. After successful run of ansible playbook, visit the IP of the server to continue setting up the wordpress site. 
diff --git a/hosts b/hosts
new file mode 100644
index 0000000..0aed5a8
--- /dev/null
+++ b/hosts
@@ -0,0 +1,2 @@
+172.31.7.61
+
diff --git a/roles/ec2/README.md b/roles/ec2/README.md
new file mode 100644
index 0000000..225dd44
--- /dev/null
+++ b/roles/ec2/README.md
@@ -0,0 +1,38 @@
+Role Name
+=========
+
+A brief description of the role goes here.
+
+Requirements
+------------
+
+Any pre-requisites that may not be covered by Ansible itself or the role should be mentioned here. For instance, if the role uses the EC2 module, it may be a good idea to mention in this section that the boto package is required.
+
+Role Variables
+--------------
+
+A description of the settable variables for this role should go here, including any variables that are in defaults/main.yml, vars/main.yml, and any variables that can/should be set via parameters to the role. Any variables that are read from other roles and/or the global scope (ie. hostvars, group vars, etc.) should be mentioned here as well.
+
+Dependencies
+------------
+
+A list of other roles hosted on Galaxy should go here, plus any details in regards to parameters that may need to be set for other roles, or variables that are used from other roles.
+
+Example Playbook
+----------------
+
+Including an example of how to use your role (for instance, with variables passed in as parameters) is always nice for users too:
+
+    - hosts: servers
+      roles:
+         - { role: username.rolename, x: 42 }
+
+License
+-------
+
+BSD
+
+Author Information
+------------------
+
+An optional section for the role authors to include contact information, or a website (HTML is not allowed).
diff --git a/roles/ec2/defaults/main.yml b/roles/ec2/defaults/main.yml
new file mode 100644
index 0000000..aff7ea9
--- /dev/null
+++ b/roles/ec2/defaults/main.yml
@@ -0,0 +1,2 @@
+---
+# defaults file for ec2
diff --git a/roles/ec2/handlers/main.yml b/roles/ec2/handlers/main.yml
new file mode 100644
index 0000000..7dba0f0
--- /dev/null
+++ b/roles/ec2/handlers/main.yml
@@ -0,0 +1,2 @@
+---
+# handlers file for ec2
diff --git a/roles/ec2/meta/main.yml b/roles/ec2/meta/main.yml
new file mode 100644
index 0000000..c572acc
--- /dev/null
+++ b/roles/ec2/meta/main.yml
@@ -0,0 +1,52 @@
+galaxy_info:
+  author: your name
+  description: your role description
+  company: your company (optional)
+
+  # If the issue tracker for your role is not on github, uncomment the
+  # next line and provide a value
+  # issue_tracker_url: http://example.com/issue/tracker
+
+  # Choose a valid license ID from https://spdx.org - some suggested licenses:
+  # - BSD-3-Clause (default)
+  # - MIT
+  # - GPL-2.0-or-later
+  # - GPL-3.0-only
+  # - Apache-2.0
+  # - CC-BY-4.0
+  license: license (GPL-2.0-or-later, MIT, etc)
+
+  min_ansible_version: 2.1
+
+  # If this a Container Enabled role, provide the minimum Ansible Container version.
+  # min_ansible_container_version:
+
+  #
+  # Provide a list of supported platforms, and for each platform a list of versions.
+  # If you don't wish to enumerate all versions for a particular platform, use 'all'.
+  # To view available platforms and versions (or releases), visit:
+  # https://galaxy.ansible.com/api/v1/platforms/
+  #
+  # platforms:
+  # - name: Fedora
+  #   versions:
+  #   - all
+  #   - 25
+  # - name: SomePlatform
+  #   versions:
+  #   - all
+  #   - 1.0
+  #   - 7
+  #   - 99.99
+
+  galaxy_tags: []
+    # List tags for your role here, one per line. A tag is a keyword that describes
+    # and categorizes the role. Users find roles by searching for tags. Be sure to
+    # remove the '[]' above, if you add tags to this list.
+    #
+    # NOTE: A tag is limited to a single word comprised of alphanumeric characters.
+    #       Maximum 20 tags per role.
+
+dependencies: []
+  # List your role dependencies here, one per line. Be sure to remove the '[]' above,
+  # if you add dependencies to this list.
diff --git a/roles/ec2/tasks/main.yml b/roles/ec2/tasks/main.yml
new file mode 100644
index 0000000..d9b6d25
--- /dev/null
+++ b/roles/ec2/tasks/main.yml
@@ -0,0 +1,27 @@
+---
+# tasks file for ec2
+
+- name: Create EC2 instance
+  ec2:
+    key_name: my_key
+    instance_type: t2.micro
+    image: ami-0c55b159cbfafe1f0
+    region: us-east-2
+    wait: yes
+    count: 1
+    vpc_subnet_id: subnet-0123456789abcdef0
+    assign_public_ip: yes
+  register: ec2
+
+- name: Add new instance to host group
+  add_host:
+    hostname: "{{ item.public_ip }}"
+    groupname: launched
+  with_items: "{{ ec2.instances }}"
+
+- name: Wait for SSH to come up
+  wait_for:
+    host: "{{ item.public_ip }}"
+    port: 22
+    state: started
+  with_items: "{{ ec2.instances }}"
diff --git a/roles/ec2/tests/inventory b/roles/ec2/tests/inventory
new file mode 100644
index 0000000..878877b
--- /dev/null
+++ b/roles/ec2/tests/inventory
@@ -0,0 +1,2 @@
+localhost
+
diff --git a/roles/ec2/tests/test.yml b/roles/ec2/tests/test.yml
new file mode 100644
index 0000000..1c1dff0
--- /dev/null
+++ b/roles/ec2/tests/test.yml
@@ -0,0 +1,5 @@
+---
+- hosts: localhost
+  remote_user: root
+  roles:
+    - ec2
diff --git a/roles/ec2/vars/main.yml b/roles/ec2/vars/main.yml
new file mode 100644
index 0000000..747c1a6
--- /dev/null
+++ b/roles/ec2/vars/main.yml
@@ -0,0 +1,2 @@
+---
+# vars file for ec2
diff --git a/roles/mysql/README.md b/roles/mysql/README.md
new file mode 100644
index 0000000..225dd44
--- /dev/null
+++ b/roles/mysql/README.md
@@ -0,0 +1,38 @@
+Role Name
+=========
+
+A brief description of the role goes here.
+
+Requirements
+------------
+
+Any pre-requisites that may not be covered by Ansible itself or the role should be mentioned here. For instance, if the role uses the EC2 module, it may be a good idea to mention in this section that the boto package is required.
+
+Role Variables
+--------------
+
+A description of the settable variables for this role should go here, including any variables that are in defaults/main.yml, vars/main.yml, and any variables that can/should be set via parameters to the role. Any variables that are read from other roles and/or the global scope (ie. hostvars, group vars, etc.) should be mentioned here as well.
+
+Dependencies
+------------
+
+A list of other roles hosted on Galaxy should go here, plus any details in regards to parameters that may need to be set for other roles, or variables that are used from other roles.
+
+Example Playbook
+----------------
+
+Including an example of how to use your role (for instance, with variables passed in as parameters) is always nice for users too:
+
+    - hosts: servers
+      roles:
+         - { role: username.rolename, x: 42 }
+
+License
+-------
+
+BSD
+
+Author Information
+------------------
+
+An optional section for the role authors to include contact information, or a website (HTML is not allowed).
diff --git a/roles/mysql/defaults/main.yml b/roles/mysql/defaults/main.yml
new file mode 100644
index 0000000..8b59b99
--- /dev/null
+++ b/roles/mysql/defaults/main.yml
@@ -0,0 +1,5 @@
+---
+# defaults file for mysql
+wp_mysql_db: wordpress
+wp_mysql_user: wordpress
+wp_mysql_password: password
diff --git a/roles/mysql/handlers/main.yml b/roles/mysql/handlers/main.yml
new file mode 100644
index 0000000..2b51cbd
--- /dev/null
+++ b/roles/mysql/handlers/main.yml
@@ -0,0 +1,2 @@
+---
+# handlers file for mysql
diff --git a/roles/mysql/meta/main.yml b/roles/mysql/meta/main.yml
new file mode 100644
index 0000000..c572acc
--- /dev/null
+++ b/roles/mysql/meta/main.yml
@@ -0,0 +1,52 @@
+galaxy_info:
+  author: your name
+  description: your role description
+  company: your company (optional)
+
+  # If the issue tracker for your role is not on github, uncomment the
+  # next line and provide a value
+  # issue_tracker_url: http://example.com/issue/tracker
+
+  # Choose a valid license ID from https://spdx.org - some suggested licenses:
+  # - BSD-3-Clause (default)
+  # - MIT
+  # - GPL-2.0-or-later
+  # - GPL-3.0-only
+  # - Apache-2.0
+  # - CC-BY-4.0
+  license: license (GPL-2.0-or-later, MIT, etc)
+
+  min_ansible_version: 2.1
+
+  # If this a Container Enabled role, provide the minimum Ansible Container version.
+  # min_ansible_container_version:
+
+  #
+  # Provide a list of supported platforms, and for each platform a list of versions.
+  # If you don't wish to enumerate all versions for a particular platform, use 'all'.
+  # To view available platforms and versions (or releases), visit:
+  # https://galaxy.ansible.com/api/v1/platforms/
+  #
+  # platforms:
+  # - name: Fedora
+  #   versions:
+  #   - all
+  #   - 25
+  # - name: SomePlatform
+  #   versions:
+  #   - all
+  #   - 1.0
+  #   - 7
+  #   - 99.99
+
+  galaxy_tags: []
+    # List tags for your role here, one per line. A tag is a keyword that describes
+    # and categorizes the role. Users find roles by searching for tags. Be sure to
+    # remove the '[]' above, if you add tags to this list.
+    #
+    # NOTE: A tag is limited to a single word comprised of alphanumeric characters.
+    #       Maximum 20 tags per role.
+
+dependencies: []
+  # List your role dependencies here, one per line. Be sure to remove the '[]' above,
+  # if you add dependencies to this list.
diff --git a/roles/mysql/tasks/main.yml b/roles/mysql/tasks/main.yml
new file mode 100644
index 0000000..f5adc92
--- /dev/null
+++ b/roles/mysql/tasks/main.yml
@@ -0,0 +1,12 @@
+---
+# tasks file for mysql
+- name: Create a MySQL database
+  mysql_db: name={{ wp_mysql_db }} state=present login_user=root login_password=password
+  become: yes
+    
+- name: create mysql user
+  mysql_user: 
+    name={{wp_mysql_user}}
+    login_password={{wp_mysql_password}}
+    priv=*.*:ALL
+  become: yes  
\ No newline at end of file
diff --git a/roles/mysql/templates/wp-config.j2 b/roles/mysql/templates/wp-config.j2
new file mode 100644
index 0000000..394913b
--- /dev/null
+++ b/roles/mysql/templates/wp-config.j2
@@ -0,0 +1,7 @@
+<?php
+define('DB_NAME', '{{ lookup('default', 'db_name') }}');
+define('DB_USER', '{{ lookup('default', 'db_user') }}');
+define('DB_PASSWORD', '{{ lookup('default', 'db_password') }}');
+define('DB_HOST', 'localhost');
+define('DB_CHARSET', 'utf8');
+define('DB_COLLATE', '');
diff --git a/roles/mysql/tests/inventory b/roles/mysql/tests/inventory
new file mode 100644
index 0000000..878877b
--- /dev/null
+++ b/roles/mysql/tests/inventory
@@ -0,0 +1,2 @@
+localhost
+
diff --git a/roles/mysql/tests/test.yml b/roles/mysql/tests/test.yml
new file mode 100644
index 0000000..15feaa1
--- /dev/null
+++ b/roles/mysql/tests/test.yml
@@ -0,0 +1,5 @@
+---
+- hosts: localhost
+  remote_user: root
+  roles:
+    - mysql
diff --git a/roles/mysql/vars/main.yml b/roles/mysql/vars/main.yml
new file mode 100644
index 0000000..a79bfed
--- /dev/null
+++ b/roles/mysql/vars/main.yml
@@ -0,0 +1,2 @@
+---
+# vars file for mysql
diff --git a/roles/php/README.md b/roles/php/README.md
new file mode 100644
index 0000000..225dd44
--- /dev/null
+++ b/roles/php/README.md
@@ -0,0 +1,38 @@
+Role Name
+=========
+
+A brief description of the role goes here.
+
+Requirements
+------------
+
+Any pre-requisites that may not be covered by Ansible itself or the role should be mentioned here. For instance, if the role uses the EC2 module, it may be a good idea to mention in this section that the boto package is required.
+
+Role Variables
+--------------
+
+A description of the settable variables for this role should go here, including any variables that are in defaults/main.yml, vars/main.yml, and any variables that can/should be set via parameters to the role. Any variables that are read from other roles and/or the global scope (ie. hostvars, group vars, etc.) should be mentioned here as well.
+
+Dependencies
+------------
+
+A list of other roles hosted on Galaxy should go here, plus any details in regards to parameters that may need to be set for other roles, or variables that are used from other roles.
+
+Example Playbook
+----------------
+
+Including an example of how to use your role (for instance, with variables passed in as parameters) is always nice for users too:
+
+    - hosts: servers
+      roles:
+         - { role: username.rolename, x: 42 }
+
+License
+-------
+
+BSD
+
+Author Information
+------------------
+
+An optional section for the role authors to include contact information, or a website (HTML is not allowed).
diff --git a/roles/php/defaults/main.yml b/roles/php/defaults/main.yml
new file mode 100644
index 0000000..0158eb6
--- /dev/null
+++ b/roles/php/defaults/main.yml
@@ -0,0 +1,2 @@
+---
+# defaults file for php
diff --git a/roles/php/handlers/main.yml b/roles/php/handlers/main.yml
new file mode 100644
index 0000000..8b978ea
--- /dev/null
+++ b/roles/php/handlers/main.yml
@@ -0,0 +1,2 @@
+---
+# handlers file for php
diff --git a/roles/php/meta/main.yml b/roles/php/meta/main.yml
new file mode 100644
index 0000000..c572acc
--- /dev/null
+++ b/roles/php/meta/main.yml
@@ -0,0 +1,52 @@
+galaxy_info:
+  author: your name
+  description: your role description
+  company: your company (optional)
+
+  # If the issue tracker for your role is not on github, uncomment the
+  # next line and provide a value
+  # issue_tracker_url: http://example.com/issue/tracker
+
+  # Choose a valid license ID from https://spdx.org - some suggested licenses:
+  # - BSD-3-Clause (default)
+  # - MIT
+  # - GPL-2.0-or-later
+  # - GPL-3.0-only
+  # - Apache-2.0
+  # - CC-BY-4.0
+  license: license (GPL-2.0-or-later, MIT, etc)
+
+  min_ansible_version: 2.1
+
+  # If this a Container Enabled role, provide the minimum Ansible Container version.
+  # min_ansible_container_version:
+
+  #
+  # Provide a list of supported platforms, and for each platform a list of versions.
+  # If you don't wish to enumerate all versions for a particular platform, use 'all'.
+  # To view available platforms and versions (or releases), visit:
+  # https://galaxy.ansible.com/api/v1/platforms/
+  #
+  # platforms:
+  # - name: Fedora
+  #   versions:
+  #   - all
+  #   - 25
+  # - name: SomePlatform
+  #   versions:
+  #   - all
+  #   - 1.0
+  #   - 7
+  #   - 99.99
+
+  galaxy_tags: []
+    # List tags for your role here, one per line. A tag is a keyword that describes
+    # and categorizes the role. Users find roles by searching for tags. Be sure to
+    # remove the '[]' above, if you add tags to this list.
+    #
+    # NOTE: A tag is limited to a single word comprised of alphanumeric characters.
+    #       Maximum 20 tags per role.
+
+dependencies: []
+  # List your role dependencies here, one per line. Be sure to remove the '[]' above,
+  # if you add dependencies to this list.
diff --git a/roles/php/tasks/main.yml b/roles/php/tasks/main.yml
new file mode 100644
index 0000000..64f60da
--- /dev/null
+++ b/roles/php/tasks/main.yml
@@ -0,0 +1,8 @@
+---
+# tasks file for php
+- name: Install php extensions
+  become: yes
+  apt: 
+    name: [php-gd, php-ssh2]
+    state: present
+  
diff --git a/roles/php/tests/inventory b/roles/php/tests/inventory
new file mode 100644
index 0000000..878877b
--- /dev/null
+++ b/roles/php/tests/inventory
@@ -0,0 +1,2 @@
+localhost
+
diff --git a/roles/php/tests/test.yml b/roles/php/tests/test.yml
new file mode 100644
index 0000000..c2727bb
--- /dev/null
+++ b/roles/php/tests/test.yml
@@ -0,0 +1,5 @@
+---
+- hosts: localhost
+  remote_user: root
+  roles:
+    - php
diff --git a/roles/php/vars/main.yml b/roles/php/vars/main.yml
new file mode 100644
index 0000000..be45ded
--- /dev/null
+++ b/roles/php/vars/main.yml
@@ -0,0 +1,2 @@
+---
+# vars file for php
diff --git a/roles/server/README.md b/roles/server/README.md
new file mode 100644
index 0000000..225dd44
--- /dev/null
+++ b/roles/server/README.md
@@ -0,0 +1,38 @@
+Role Name
+=========
+
+A brief description of the role goes here.
+
+Requirements
+------------
+
+Any pre-requisites that may not be covered by Ansible itself or the role should be mentioned here. For instance, if the role uses the EC2 module, it may be a good idea to mention in this section that the boto package is required.
+
+Role Variables
+--------------
+
+A description of the settable variables for this role should go here, including any variables that are in defaults/main.yml, vars/main.yml, and any variables that can/should be set via parameters to the role. Any variables that are read from other roles and/or the global scope (ie. hostvars, group vars, etc.) should be mentioned here as well.
+
+Dependencies
+------------
+
+A list of other roles hosted on Galaxy should go here, plus any details in regards to parameters that may need to be set for other roles, or variables that are used from other roles.
+
+Example Playbook
+----------------
+
+Including an example of how to use your role (for instance, with variables passed in as parameters) is always nice for users too:
+
+    - hosts: servers
+      roles:
+         - { role: username.rolename, x: 42 }
+
+License
+-------
+
+BSD
+
+Author Information
+------------------
+
+An optional section for the role authors to include contact information, or a website (HTML is not allowed).
diff --git a/roles/server/defaults/main.yml b/roles/server/defaults/main.yml
new file mode 100644
index 0000000..492c903
--- /dev/null
+++ b/roles/server/defaults/main.yml
@@ -0,0 +1,2 @@
+---
+# defaults file for server
diff --git a/roles/server/handlers/main.yml b/roles/server/handlers/main.yml
new file mode 100644
index 0000000..e7b1089
--- /dev/null
+++ b/roles/server/handlers/main.yml
@@ -0,0 +1,2 @@
+---
+# handlers file for server
diff --git a/roles/server/meta/main.yml b/roles/server/meta/main.yml
new file mode 100644
index 0000000..c572acc
--- /dev/null
+++ b/roles/server/meta/main.yml
@@ -0,0 +1,52 @@
+galaxy_info:
+  author: your name
+  description: your role description
+  company: your company (optional)
+
+  # If the issue tracker for your role is not on github, uncomment the
+  # next line and provide a value
+  # issue_tracker_url: http://example.com/issue/tracker
+
+  # Choose a valid license ID from https://spdx.org - some suggested licenses:
+  # - BSD-3-Clause (default)
+  # - MIT
+  # - GPL-2.0-or-later
+  # - GPL-3.0-only
+  # - Apache-2.0
+  # - CC-BY-4.0
+  license: license (GPL-2.0-or-later, MIT, etc)
+
+  min_ansible_version: 2.1
+
+  # If this a Container Enabled role, provide the minimum Ansible Container version.
+  # min_ansible_container_version:
+
+  #
+  # Provide a list of supported platforms, and for each platform a list of versions.
+  # If you don't wish to enumerate all versions for a particular platform, use 'all'.
+  # To view available platforms and versions (or releases), visit:
+  # https://galaxy.ansible.com/api/v1/platforms/
+  #
+  # platforms:
+  # - name: Fedora
+  #   versions:
+  #   - all
+  #   - 25
+  # - name: SomePlatform
+  #   versions:
+  #   - all
+  #   - 1.0
+  #   - 7
+  #   - 99.99
+
+  galaxy_tags: []
+    # List tags for your role here, one per line. A tag is a keyword that describes
+    # and categorizes the role. Users find roles by searching for tags. Be sure to
+    # remove the '[]' above, if you add tags to this list.
+    #
+    # NOTE: A tag is limited to a single word comprised of alphanumeric characters.
+    #       Maximum 20 tags per role.
+
+dependencies: []
+  # List your role dependencies here, one per line. Be sure to remove the '[]' above,
+  # if you add dependencies to this list.
diff --git a/roles/server/tasks/main.yml b/roles/server/tasks/main.yml
new file mode 100644
index 0000000..d652a18
--- /dev/null
+++ b/roles/server/tasks/main.yml
@@ -0,0 +1,26 @@
+---
+# tasks file for server
+
+- name: Update apt cache
+  apt: update_cache=yes cache_valid_time=3600
+  become: yes
+- name: install pip
+  become: yes
+  apt: 
+    name: python3-pip
+    state: present  
+- name: Install required software
+  apt:
+    name: [php, mysql-server, php-mysql, apache2, libapache2-mod-php]
+    state: present 
+- name: Install PyMySQL
+  become: yes
+  pip:
+    name: PyMySQL
+    state: present
+    executable: pip3
+        
+
+    
+  
+
diff --git a/roles/server/tests/inventory b/roles/server/tests/inventory
new file mode 100644
index 0000000..878877b
--- /dev/null
+++ b/roles/server/tests/inventory
@@ -0,0 +1,2 @@
+localhost
+
diff --git a/roles/server/tests/test.yml b/roles/server/tests/test.yml
new file mode 100644
index 0000000..fa17688
--- /dev/null
+++ b/roles/server/tests/test.yml
@@ -0,0 +1,5 @@
+---
+- hosts: localhost
+  remote_user: root
+  roles:
+    - server
diff --git a/roles/server/vars/main.yml b/roles/server/vars/main.yml
new file mode 100644
index 0000000..ea07ae9
--- /dev/null
+++ b/roles/server/vars/main.yml
@@ -0,0 +1,2 @@
+---
+# vars file for server
diff --git a/roles/wordpress/README.md b/roles/wordpress/README.md
new file mode 100644
index 0000000..225dd44
--- /dev/null
+++ b/roles/wordpress/README.md
@@ -0,0 +1,38 @@
+Role Name
+=========
+
+A brief description of the role goes here.
+
+Requirements
+------------
+
+Any pre-requisites that may not be covered by Ansible itself or the role should be mentioned here. For instance, if the role uses the EC2 module, it may be a good idea to mention in this section that the boto package is required.
+
+Role Variables
+--------------
+
+A description of the settable variables for this role should go here, including any variables that are in defaults/main.yml, vars/main.yml, and any variables that can/should be set via parameters to the role. Any variables that are read from other roles and/or the global scope (ie. hostvars, group vars, etc.) should be mentioned here as well.
+
+Dependencies
+------------
+
+A list of other roles hosted on Galaxy should go here, plus any details in regards to parameters that may need to be set for other roles, or variables that are used from other roles.
+
+Example Playbook
+----------------
+
+Including an example of how to use your role (for instance, with variables passed in as parameters) is always nice for users too:
+
+    - hosts: servers
+      roles:
+         - { role: username.rolename, x: 42 }
+
+License
+-------
+
+BSD
+
+Author Information
+------------------
+
+An optional section for the role authors to include contact information, or a website (HTML is not allowed).
diff --git a/roles/wordpress/defaults/main.yml b/roles/wordpress/defaults/main.yml
new file mode 100644
index 0000000..fd62c7b
--- /dev/null
+++ b/roles/wordpress/defaults/main.yml
@@ -0,0 +1,2 @@
+---
+# defaults file for wordpress
diff --git a/roles/wordpress/handlers/main.yml b/roles/wordpress/handlers/main.yml
new file mode 100644
index 0000000..8c22621
--- /dev/null
+++ b/roles/wordpress/handlers/main.yml
@@ -0,0 +1,5 @@
+---
+# handlers file for wordpress
+- name: restart apache
+  service: name=apache2 state=restarted
+  become: yes
diff --git a/roles/wordpress/meta/main.yml b/roles/wordpress/meta/main.yml
new file mode 100644
index 0000000..c572acc
--- /dev/null
+++ b/roles/wordpress/meta/main.yml
@@ -0,0 +1,52 @@
+galaxy_info:
+  author: your name
+  description: your role description
+  company: your company (optional)
+
+  # If the issue tracker for your role is not on github, uncomment the
+  # next line and provide a value
+  # issue_tracker_url: http://example.com/issue/tracker
+
+  # Choose a valid license ID from https://spdx.org - some suggested licenses:
+  # - BSD-3-Clause (default)
+  # - MIT
+  # - GPL-2.0-or-later
+  # - GPL-3.0-only
+  # - Apache-2.0
+  # - CC-BY-4.0
+  license: license (GPL-2.0-or-later, MIT, etc)
+
+  min_ansible_version: 2.1
+
+  # If this a Container Enabled role, provide the minimum Ansible Container version.
+  # min_ansible_container_version:
+
+  #
+  # Provide a list of supported platforms, and for each platform a list of versions.
+  # If you don't wish to enumerate all versions for a particular platform, use 'all'.
+  # To view available platforms and versions (or releases), visit:
+  # https://galaxy.ansible.com/api/v1/platforms/
+  #
+  # platforms:
+  # - name: Fedora
+  #   versions:
+  #   - all
+  #   - 25
+  # - name: SomePlatform
+  #   versions:
+  #   - all
+  #   - 1.0
+  #   - 7
+  #   - 99.99
+
+  galaxy_tags: []
+    # List tags for your role here, one per line. A tag is a keyword that describes
+    # and categorizes the role. Users find roles by searching for tags. Be sure to
+    # remove the '[]' above, if you add tags to this list.
+    #
+    # NOTE: A tag is limited to a single word comprised of alphanumeric characters.
+    #       Maximum 20 tags per role.
+
+dependencies: []
+  # List your role dependencies here, one per line. Be sure to remove the '[]' above,
+  # if you add dependencies to this list.
diff --git a/roles/wordpress/tasks/main.yml b/roles/wordpress/tasks/main.yml
new file mode 100644
index 0000000..7a3b86a
--- /dev/null
+++ b/roles/wordpress/tasks/main.yml
@@ -0,0 +1,32 @@
+---
+# tasks file for wordpress
+- name: Download WordPress
+  get_url:
+    url=https://wordpress.org/latest.tar.gz
+    dest=/tmp/wordpress.tar.gz
+    validate_certs=no
+- name: Extract WordPress
+  unarchive: src=/tmp/wordpress.tar.gz dest=/var/www/ copy=no
+  become: yes
+- name: Update default Apache site
+  become: yes
+  lineinfile:
+    dest=/etc/apache2/sites-enabled/000-default.conf
+    regexp="(.)+Document Root /var/www/html"
+    line="Document Root /var/www/wordpress"
+  notify:
+    - restart apache
+- name: Copy sample config file
+  command: mv /var/www/wordpress/wp-config-sample.php /var/www/wordpress/wp-config.php creates=/var/www/wordpress/wp-config.php
+  become: yes
+- name: Update WordPress config file
+  lineinfile:
+    dest=/var/www/wordpress/wp-config.php
+    regexp="{{item.regexp }}"
+    line="{{item.line }}"
+  with_items:
+    - {'regexp': "define\\('DB_NAME', '(-)+'\\);", 'line': "define('DB_NAME', '{{wp_mysql_db}}');"}
+    - {'regexp': "define\\('DB_USER', '(.)+'\\);", 'line': "define('DB_USER', '{{wp_mysql_user}}');"}
+    - {'regexp': "define\\('DB_PASSWORD', '(.)+'\\);", 'line': "define('DB_PASSWORD', '{{wp_mysql_password}}');"}
+  become: yes
+
diff --git a/roles/wordpress/tests/inventory b/roles/wordpress/tests/inventory
new file mode 100644
index 0000000..878877b
--- /dev/null
+++ b/roles/wordpress/tests/inventory
@@ -0,0 +1,2 @@
+localhost
+
diff --git a/roles/wordpress/tests/test.yml b/roles/wordpress/tests/test.yml
new file mode 100644
index 0000000..3a393ad
--- /dev/null
+++ b/roles/wordpress/tests/test.yml
@@ -0,0 +1,5 @@
+---
+- hosts: localhost
+  remote_user: root
+  roles:
+    - wordpress
diff --git a/roles/wordpress/vars/main.yml b/roles/wordpress/vars/main.yml
new file mode 100644
index 0000000..d9e7d8c
--- /dev/null
+++ b/roles/wordpress/vars/main.yml
@@ -0,0 +1,2 @@
+---
+# vars file for wordpress
diff --git a/wordpress.yaml b/wordpress.yaml
index 8b13789..92fed14 100644
--- a/wordpress.yaml
+++ b/wordpress.yaml
@@ -1 +1,18 @@
-
+---
+- name: Install python in target node with ansible
+  hosts: all
+  become: true
+  gather_facts: no
+  tasks:
+  - name: install python 3
+    raw: test -e /usr/bin/python3 || (apt -y update && apt install -y python3) 
+- hosts: all
+  name: Execute roles
+  become: yes
+  roles:
+    - ec2
+    - server
+    - php
+    - mysql
+    - {role: 'wordpress', tags: 'wordpress'}    
+        
-- 
2.34.1

